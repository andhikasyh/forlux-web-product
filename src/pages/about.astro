---
import Layout from '../layouts/Layout.astro';
import Timeline from '../components/about/Timeline.astro';
import Roadmap from '../components/about/Roadmap.astro';
import ContactCTA from '../components/ContactCTA.astro';
const stats = [
  { value: "25+", label: "Years Experience", description: "Leading traffic innovation since 1999" },
  { value: "20+", label: "Cities Served", description: "Transforming urban mobility nationwide" },
  { value: "2000+", label: "Traffic Systems", description: "Deployed and maintained successfully" },
  { value: "99.9%", label: "System Reliability", description: "Industry-leading uptime" }
];

const values = [
  {
    icon: "üéØ",
    title: "Innovation First",
    description: "Pioneering next-generation traffic solutions with cutting-edge technology and Indonesian ingenuity"
  },
  {
    icon: "üåø",
    title: "Sustainability",
    description: "Committed to eco-friendly urban development through smart, energy-efficient solutions"
  },
  {
    icon: "ü§ù",
    title: "Local Impact",
    description: "Empowering Indonesian cities with world-class technology and local expertise"
  },
  {
    icon: "‚ö°",
    title: "Excellence",
    description: "Delivering unmatched quality and reliability in every system we deploy"
  }
];

const achievements = [
  { year: 2024, title: "ARM Partnership", description: "Official technology partner for traffic systems" },
  { year: 2023, title: "ISO 27001", description: "Information security certification" },
  { year: 2022, title: "TKDN + 50%", description: "Local content certification achieved" }
];
---

<Layout title="About FORLUX">
  <div class="relative">
    {/* Hero Section */}
    <section class="relative py-32 overflow-hidden">
      {/* Background Effects */}
      <div class="absolute inset-0">
        <div class="absolute inset-0 bg-gradient-radial from-forlux-orange-primary/10 to-transparent opacity-30 blur-3xl"></div>
      </div>

      {/* Add Animated Traffic Elements */}
      <div class="absolute inset-0 pointer-events-none overflow-hidden">
        {/* Traffic Grid Lines */}
        <div class="traffic-grid absolute inset-0 opacity-20"></div>
        
        {/* Animated Dots */}
        <div class="data-flow-container">
          {Array(10).fill(0).map((_, i) => (
            <div class={`data-point data-point-${i}`}></div>
          ))}
        </div>

        {/* Connection Lines */}
        <svg class="absolute inset-0 w-full h-full connection-lines opacity-20">
          <path class="connection-path" d="M0 0" />
        </svg>
      </div>

      <div class="container mx-auto relative">
        <div class="max-w-3xl mx-auto text-center" data-aos="fade-up">
          <span class="inline-block px-4 py-1 text-sm font-medium text-forlux-orange-primary bg-forlux-orange-primary/10 rounded-full border border-forlux-orange-primary/20 mb-6">
            Est. 1999
          </span>
          <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold mb-6 bg-clip-text text-transparent bg-forlux-orange-gradient">
            Shaping the Future of Urban Mobility
          </h1>
          <p class="text-xl text-gray-300 leading-relaxed mb-8">
            For over two decades, we've been at the forefront of traffic management innovation, combining Indonesian expertise with world-class technology to create smarter, safer cities.
          </p>
          
          <div class="flex justify-center space-x-4">
            <a 
              href="/contact" 
              class="px-6 py-3 rounded-lg font-semibold text-white bg-gradient-to-r from-forlux-orange-primary to-forlux-orange-secondary hover:opacity-90 transition-opacity"
            >
              Partner With Us
            </a>
            <a 
              href="#roadmap" 
              class="px-6 py-3 rounded-lg font-semibold text-white border border-forlux-orange-primary/20 hover:bg-forlux-orange-primary/5 transition-all"
            >
              View Roadmap
            </a>
          </div>
        </div>

        {/* Stats Grid */}
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-6 max-w-5xl mx-auto mt-20">
          {stats.map((stat, index) => (
            <div 
              class="glass-card p-6 text-center group hover-slide-up"
              data-aos="fade-up"
              data-aos-delay={index * 100}
            >
              <div class="text-3xl font-bold text-forlux-orange-primary mb-2 group-hover:scale-110 transition-transform">
                {stat.value}
              </div>
              <div class="text-sm font-semibold text-white mb-2">
                {stat.label}
              </div>
              <p class="text-xs text-gray-400">
                {stat.description}
              </p>
            </div>
          ))}
        </div>
      </div>
    </section>

    {/* Values Section */}
    <section class="relative py-32 bg-slate-900/50">
      <div class="container mx-auto">
        <div class="text-center mb-16" data-aos="fade-up">
          <span class="inline-block px-4 py-1 text-sm font-medium text-forlux-green-primary bg-forlux-green-primary/10 rounded-full border border-forlux-green-primary/20 mb-4">
            Our Values
          </span>
          <h2 class="text-4xl font-bold mb-4 bg-clip-text text-transparent bg-forlux-green-gradient">
            Driven by Purpose
          </h2>
          <p class="text-gray-400 max-w-2xl mx-auto">
            Our core values guide every decision we make and every system we build
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-6xl mx-auto">
          {values.map((value, index) => (
            <div 
              class="glass-card p-8 text-center group"
              data-aos="fade-up"
              data-aos-delay={index * 100}
            >
              <span class="text-4xl mb-6 block transform group-hover:scale-110 transition-transform duration-500">
                {value.icon}
              </span>
              <h3 class="text-xl font-bold text-white mb-4">{value.title}</h3>
              <p class="text-gray-400 leading-relaxed">{value.description}</p>
            </div>
          ))}
        </div>
      </div>
    </section>

    {/* Recent Achievements */}
    <section class="relative py-32">
      <div class="container mx-auto">
        <div class="text-center mb-16" data-aos="fade-up">
          <span class="inline-block px-4 py-1 text-sm font-medium text-forlux-orange-primary bg-forlux-orange-primary/10 rounded-full border border-forlux-orange-primary/20 mb-4">
            Recent Achievements
          </span>
          <h2 class="text-4xl font-bold mb-4 bg-clip-text text-transparent bg-forlux-orange-gradient">
            Milestones & Recognition
          </h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto">
          {achievements.map((achievement, index) => (
            <div 
              class="glass-card p-6 group"
              data-aos="fade-up"
              data-aos-delay={index * 100}
            >
              <div class="text-2xl font-bold bg-clip-text text-transparent bg-forlux-orange-gradient mb-2">
                {achievement.year}
              </div>
              <h3 class="text-lg font-bold text-white mb-2">{achievement.title}</h3>
              <p class="text-gray-400">{achievement.description}</p>
            </div>
          ))}
        </div>
      </div>
    </section>

    {/* Timeline Section */}
    <section class="relative py-32 bg-slate-900/50">
      <div class="container mx-auto">
        <div class="text-center mb-16" data-aos="fade-up">
          <span class="inline-block px-4 py-1 text-sm font-medium text-forlux-orange-primary bg-forlux-orange-primary/10 rounded-full border border-forlux-orange-primary/20 mb-4">
            Our Journey
          </span>
          <h2 class="text-4xl font-bold mb-4 bg-clip-text text-transparent bg-forlux-orange-gradient">
            25 Years of Innovation
          </h2>
          <p class="text-gray-400 max-w-2xl mx-auto">
            From our founding to today's cutting-edge solutions, explore the milestones that shaped our journey
          </p>
        </div>

        <Timeline />
      </div>
    </section>

    {/* Roadmap Section */}
    <section id="roadmap" class="relative py-32">
      <div class="container mx-auto">
        <div class="text-center mb-16" data-aos="fade-up">
          <span class="inline-block px-4 py-1 text-sm font-medium text-forlux-green-primary bg-forlux-green-primary/10 rounded-full border border-forlux-green-primary/20 mb-4">
            Looking Forward
          </span>
          <h2 class="text-4xl font-bold mb-4 bg-clip-text text-transparent bg-forlux-green-gradient">
            Product Roadmap 2024
          </h2>
          <p class="text-gray-400 max-w-2xl mx-auto">
            Discover our vision for the future of traffic management technology
          </p>
        </div>

        <Roadmap />
        <ContactCTA />
      </div>
    </section>
  </div>
</Layout>

<style>
  .traffic-grid {
    background-image: linear-gradient(90deg, rgba(255,255,255,.1) 1px, transparent 1px),
                      linear-gradient(rgba(255,255,255,.1) 1px, transparent 1px);
    background-size: 50px 50px;
  }

  .data-point {
    @apply absolute w-2 h-2 rounded-full bg-forlux-orange-primary/60;
    filter: blur(1px);
  }

  .connection-path {
    fill: none;
    stroke: rgba(255, 255, 255, 0.2);
    stroke-width: 1;
  }
</style>

<script>
  import gsap from 'gsap';

  function initAnimations() {
    // Create traffic flow animation
    const dataPoints = document.querySelectorAll('.data-point');
    
    dataPoints.forEach((point, index) => {
      gsap.set(point, {
        x: gsap.utils.random(0, window.innerWidth),
        y: gsap.utils.random(0, window.innerHeight),
      });

      gsap.to(point, {
        duration: gsap.utils.random(3, 6),
        x: `+=${gsap.utils.random(-300, 300)}`,
        y: `+=${gsap.utils.random(-300, 300)}`,
        opacity: gsap.utils.random(0.2, 0.6),
        scale: gsap.utils.random(0.8, 1.5),
        repeat: -1,
        yoyo: true,
        ease: "none",
        delay: index * 0.2
      });
    });

    // Animate grid
    gsap.to('.traffic-grid', {
      backgroundPosition: '50px 50px',
      duration: 20,
      repeat: -1,
      ease: "none"
    });

    // Create connection lines animation
    const connectionPath = document.querySelector('.connection-path');
    const points = [];
    
    for (let i = 0; i < 5; i++) {
      points.push({
        x: gsap.utils.random(0, window.innerWidth),
        y: gsap.utils.random(0, window.innerHeight)
      });
    }

    const pathString = points.reduce((acc, point, i) => {
      return `${acc}${i === 0 ? 'M' : 'L'}${point.x},${point.y}`;
    }, '');

    gsap.set(connectionPath, { attr: { d: pathString + 'Z' } });
    gsap.to(connectionPath, {
      strokeDashoffset: 1000,
      strokeDasharray: 1000,
      duration: 10,
      repeat: -1,
      ease: "none"
    });

    return () => {
      gsap.killTweensOf('.data-point');
      gsap.killTweensOf('.traffic-grid');
      gsap.killTweensOf('.connection-path');
    };
  }

  // Handle initial load and page transitions
  document.addEventListener('astro:page-load', () => {
    const cleanup = initAnimations();
    
    document.addEventListener('astro:before-preparation', () => {
      cleanup();
    }, { once: true });
  });
</script>